const mongoose = require('mongoose');
const Schema = mongoose.Schema;

const CandleDataSchema = new Schema({
  // ЁЯУМ ржХрзЛржорзНржкрж╛ржирж┐ рж╕рж┐ржорзНржмрж▓ (ржпрзЗржоржи: RECKITTBEN)
  symbol: {
    type: String,
    required: true,
    index: true // ржжрзНрж░рзБржд ржХрзЛржпрж╝рзЗрж░рж┐рж░ ржЬржирзНржп ржЗржиржбрзЗржХрзНрж╕
  },

  // ЁЯУЕ ржорж╛рж░рзНржХрзЗржЯрзЗрж░ ржбрзЗржЯрж╛ рждрж╛рж░рж┐ржЦ (ржпрзЗржоржи: "2025-04-05")
  date: {
    type: String, // ржпржжрж┐ ржЖржкржирж┐ рждрж╛рж░рж┐ржЦржЯрж┐ `YYYY-MM-DD` ржлрж░ржорзНржпрж╛ржЯрзЗ рж░рж╛ржЦрждрзЗ ржЪрж╛ржи
    required: true,
    index: true // ржжрзНрж░рзБржд рж╣рж┐рж╕рзНржЯрзЛрж░рж┐ржХрзНржпрж╛рж▓ ржХрзЛржпрж╝рзЗрж░рж┐рж░ ржЬржирзНржп ржЗржиржбрзЗржХрзНрж╕
  },

  // ЁЯТ╣ ржУржкрзЗржирж┐ржВ ржкрзНрж░рж╛ржЗрж╕ (ржпрзЗржоржи: 3494.80)
  open: {
    type: Number,
    default: null // ржнрзБрж▓/ржЕржирзБржкрж╕рзНржерж┐ржд ржбрзЗржЯрж╛ ржЪрзЗржХрзЗрж░ ржЬржирзНржп
  },

  // ЁЯТ╣ рж▓рж╛рж╕рзНржЯ ржЯрзНрж░рзЗржбрж┐ржВ ржкрзНрж░рж╛ржЗрж╕ (LTP)
  close: {
    type: Number,
    default: null
  },

  // ЁЯТ╣ ржжрзИржирж┐ржХ ржЙржЪрзНржЪрждржо ржорзВрж▓рзНржп
  high: {
    type: Number,
    default: null
  },

  // ЁЯТ╣ ржжрзИржирж┐ржХ ржирж┐ржорзНржирждржо ржорзВрж▓рзНржп
  low: {
    type: Number,
    default: null
  },

  // ЁЯУК ржЯрзБржбрзЗрж░ ржЯрзНрж░рзЗржб ржнрж▓рж┐ржЙржо (ржпрзЗржоржи: 4725000)
  volume: {
    type: Number,
    default: null
  },

  // ЁЯТ░ ржжрзИржирж┐ржХ ржорж╛рж░рзНржХрзЗржЯ ржнрзНржпрж╛рж▓рзБ (ржорж┐рж▓рж┐ржпрж╝ржирзЗ) (ржпрзЗржоржи: 100000000)
  value: {
    type: Number,
    default: null
  },

  // ЁЯУИ ржЯрзБржбрзЗрж░ ржЯрзНрж░рзЗржб рж╕ржВржЦрзНржпрж╛ (ржпрзЗржоржи: 1200)
  trades: {
    type: Number,
    default: null
  },

  // ЁЯТ╣ ржорзВрж▓рзНржп ржкрж░рж┐ржмрж░рзНрждржи (ржпрзЗржоржи: -183.9)
  change: {
    type: Number,
    default: null
  },

  // ЁЯТ░ ржорж╛рж░рзНржХрзЗржЯ ржХрзНржпрж╛ржкрж┐ржЯрж╛рж▓рж╛ржЗржЬрзЗрж╢ржи (ржорж┐рж▓рж┐ржпрж╝ржирзЗ) (ржпрзЗржоржи: 1145600000)
  marketCap: {
    type: Number,
    default: null
  },

  // ЁЯУЖ ржбрзЗржЯрж╛ ржХржЦржи рж╕ржВржЧрзНрж░рж╣ рж╣ржпрж╝рзЗржЫрзЗ (ржпрзЗржоржи: ISO 8601)
  collectedAt: {
    type: Date,
    default: Date.now // ржбрж┐ржлрж▓рзНржЯ ржорж╛ржи рж╣рж┐рж╕рзЗржмрзЗ ржмрж░рзНрждржорж╛ржи рж╕ржоржпрж╝
  }
});

// ЁЯУБ ржоржбрзЗрж▓ ржПржХрзНрж╕ржкрзЛрж░рзНржЯ
module.exports = mongoose.model('CandleData', CandleDataSchema);